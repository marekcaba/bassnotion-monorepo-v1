(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{5992:(s,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>w});var a=r(2711),n=r(8783),l=r(8684);let d=(0,r(2308).A)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var t=r(3796),i=r(6374),c=r(689),o=r(3005),m=r(6291),h=r(6705),x=r(8558),u=r(7538),j=r(3078),p=r(6941),b=r(833),g=r(9639);function N(){let[s,e]=(0,n.useState)(!1),[r,l]=(0,n.useState)(!1),[d,t]=(0,n.useState)(!1),[N,w]=(0,n.useState)(!1),{toast:f}=(0,o.dj)(),v=(0,h.mN)({resolver:(0,m.u)(x.nM),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),y=async s=>{try{e(!0),await i.y1.updatePassword(s.currentPassword,s.newPassword),f({title:"Password updated",description:"Your password has been changed successfully."}),v.reset()}catch(s){console.error("Password change error:",s),f({title:"Failed to change password",description:s instanceof Error?s.message:"An unexpected error occurred",variant:"destructive"})}finally{e(!1)}};return(0,a.jsxs)("div",{className:"bg-card rounded-lg border p-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Change Password"}),(0,a.jsx)(b.lV,{...v,children:(0,a.jsxs)("form",{onSubmit:v.handleSubmit(y),className:"space-y-4",children:[(0,a.jsx)(b.zB,{control:v.control,name:"currentPassword",render:e=>{let{field:n}=e;return(0,a.jsxs)(b.eI,{children:[(0,a.jsx)(b.lR,{children:"Current Password"}),(0,a.jsx)(b.MJ,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.p,{type:r?"text":"password",placeholder:"Enter current password",disabled:s,...n}),(0,a.jsxs)(c.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!r),disabled:s,children:[r?(0,a.jsx)(u.A,{className:"h-4 w-4"}):(0,a.jsx)(j.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:r?"Hide password":"Show password"})]})]})}),(0,a.jsx)(b.C5,{})]})}}),(0,a.jsx)(b.zB,{control:v.control,name:"newPassword",render:e=>{let{field:r}=e;return(0,a.jsxs)(b.eI,{children:[(0,a.jsx)(b.lR,{children:"New Password"}),(0,a.jsx)(b.MJ,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.p,{type:d?"text":"password",placeholder:"Enter new password",disabled:s,...r}),(0,a.jsxs)(c.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>t(!d),disabled:s,children:[d?(0,a.jsx)(u.A,{className:"h-4 w-4"}):(0,a.jsx)(j.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:d?"Hide password":"Show password"})]})]})}),(0,a.jsx)(b.C5,{})]})}}),(0,a.jsx)(b.zB,{control:v.control,name:"confirmPassword",render:e=>{let{field:r}=e;return(0,a.jsxs)(b.eI,{children:[(0,a.jsx)(b.lR,{children:"Confirm New Password"}),(0,a.jsx)(b.MJ,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.p,{type:N?"text":"password",placeholder:"Confirm new password",disabled:s,...r}),(0,a.jsxs)(c.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>w(!N),disabled:s,children:[N?(0,a.jsx)(u.A,{className:"h-4 w-4"}):(0,a.jsx)(j.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:N?"Hide password":"Show password"})]})]})}),(0,a.jsx)(b.C5,{})]})}}),(0,a.jsx)(c.$,{type:"submit",className:"w-full",disabled:s||!v.formState.isValid,children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating Password..."]}):"Update Password"})]})})]})}function w(){let{user:s,session:e,isAuthenticated:r,isReady:m,reset:h}=(0,t.A)(),x=(0,l.useRouter)(),{toast:u}=(0,o.dj)(),[j,p]=(0,n.useState)(!1);(0,n.useEffect)(()=>{m&&!r&&x.push("/login?returnTo=/dashboard")},[r,m,x]);let b=async()=>{try{await i.y1.signOut(),h(),u({title:"Signed out",description:"You have been signed out successfully."}),x.push("/")}catch(s){console.error("Sign out error:",s),u({title:"Sign out failed",description:"There was an error signing you out. Please try again.",variant:"destructive"})}};return m?r?(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("header",{className:"border-b",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"BassNotion Dashboard"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(c.$,{onClick:()=>{x.push("/")},variant:"outline",children:[(0,a.jsx)(d,{className:"h-4 w-4 mr-2"}),"Home"]}),(0,a.jsx)(c.$,{onClick:b,variant:"outline",children:"Sign Out"})]})]})}),(0,a.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl",children:[(0,a.jsxs)("div",{className:"bg-card rounded-lg border p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Welcome back!"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"You're successfully signed in to BassNotion."}),s&&(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Email:"})," ",s.email]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"User ID:"})," ",s.id]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Email Confirmed:"})," ",s.email_confirmed_at?(0,a.jsx)("span",{className:"text-green-600",children:"✓ Confirmed"}):(0,a.jsx)("span",{className:"text-amber-600",children:"⏳ Pending"})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Account Created:"})," ",new Date(s.created_at).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsxs)("div",{className:"bg-card rounded-lg border p-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Bass Exercises"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Practice with interactive bass exercises"}),(0,a.jsx)(c.$,{size:"sm",disabled:!0,children:"Coming Soon"})]}),(0,a.jsxs)("div",{className:"bg-card rounded-lg border p-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Learning Progress"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Track your bass learning journey"}),(0,a.jsx)(c.$,{size:"sm",disabled:!0,children:"Coming Soon"})]}),(0,a.jsxs)("div",{className:"bg-card rounded-lg border p-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Community"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Connect with other bass players"}),(0,a.jsx)(c.$,{size:"sm",disabled:!0,children:"Coming Soon"})]})]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Account Settings"}),j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.$,{variant:"outline",onClick:()=>p(!1),className:"mb-4",children:"Cancel"}),(0,a.jsx)(N,{})]}):(0,a.jsx)(c.$,{onClick:()=>p(!0),children:"Change Password"})]}),(0,a.jsxs)("div",{className:"mt-8 bg-muted rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Debug Information"}),(0,a.jsxs)("div",{className:"text-xs space-y-1 font-mono",children:[(0,a.jsxs)("p",{children:["Auth Status:"," ",r?"Authenticated":"Not Authenticated"]}),(0,a.jsxs)("p",{children:["Session: ",e?"Active":"None"]}),(0,a.jsxs)("p",{children:["User: ",s?"Loaded":"None"]}),(0,a.jsxs)("p",{children:["Auth Ready: ",m?"Yes":"No"]})]})]})]})})]}):null:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Loading..."})]})})}},9846:(s,e,r)=>{Promise.resolve().then(r.bind(r,5992))}},s=>{var e=e=>s(s.s=e);s.O(0,[948,189,477,762,375,56,358],()=>e(9846)),_N_E=s.O()}]);