(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{2781:(e,t,s)=>{Promise.resolve().then(s.bind(s,4544))},3499:(e,t,s)=>{"use strict";s.d(t,{QB:()=>a.LoginForm,g2:()=>r.RegistrationForm});var r=s(4980),a=s(806);s(1907)},4544:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(2711),a=s(8783),n=s(8684),i=s(4682),o=s.n(i),c=s(3499),l=s(6374),d=s(3796),u=s(6147),h=s(689),g=s(3005);function m(){let[e,t]=(0,a.useState)(!1),[s,i]=(0,a.useState)(!1),m=(0,n.useRouter)(),x=(0,n.useSearchParams)().get("returnTo"),{setUser:f,setSession:v}=(0,d.A)(),{redirectAfterAuth:p}=(0,u.u)(),{toast:j}=(0,g.dj)(),b=async e=>{t(!0);try{{let t=await l.y1.signUpWithBackend(e);if(t.success)j({title:"Account created successfully!",description:"Welcome to BassNotion. Your account has been created."}),m.push("/dashboard");else{var s;throw Error((null==(s=t.error)?void 0:s.message)||"Registration failed")}}}catch(t){console.error("Registration error:",t);let e="Failed to create account. Please try again.";t instanceof Error&&(e=t.message),j({title:"Registration failed",description:e,variant:"destructive"})}finally{t(!1)}},y=async()=>{try{i(!0),await l.y1.signInWithGoogle()}catch(e){j({title:"Error",description:e instanceof Error?e.message:"Failed to sign in with Google",variant:"destructive"}),i(!1)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Join BassNotion"}),(0,r.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Create your account to start your bass learning journey"})]}),(0,r.jsx)("div",{className:"bg-card rounded-lg border p-6 shadow-sm",children:(0,r.jsx)(c.g2,{onSubmit:b,onGoogleSignIn:y,isLoading:e,isGoogleLoading:s})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",(0,r.jsx)(h.$,{variant:"link",asChild:!0,className:"p-0 h-auto",children:(0,r.jsx)(o(),{href:"/login".concat(x?"?returnTo=".concat(encodeURIComponent(x)):""),children:"Sign in"})})]})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(h.$,{variant:"ghost",asChild:!0,children:(0,r.jsx)(o(),{href:"/",children:"← Back to Home"})})})]})})}function x(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:(0,r.jsx)(m,{})})}},6147:(e,t,s)=>{"use strict";s.d(t,{u:()=>n});var r=s(8684),a=s(8783);let n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.useRouter)(),{defaultRedirect:s="/dashboard",requireEmailConfirmation:n=!0}=e,i=(0,a.useCallback)((e,r)=>{if(!e)return void t.push("/login");if(n&&!e.email_confirmed_at)return void t.push("/verify-email");let a=r||s;t.push(a)},[t,s,n]);return{redirectAfterAuth:i,redirectToLogin:(0,a.useCallback)(e=>{let s=e?"/login?returnTo=".concat(encodeURIComponent(e)):"/login";t.push(s)},[t]),redirectToDashboard:(0,a.useCallback)(()=>{t.push(s)},[t,s])}}}},e=>{var t=t=>e(e.s=t);e.O(0,[948,189,477,960,682,762,407,375,56,358],()=>t(2781)),_N_E=e.O()}]);