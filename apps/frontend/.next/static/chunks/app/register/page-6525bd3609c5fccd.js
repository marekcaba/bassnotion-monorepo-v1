(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{2781:(e,t,s)=>{Promise.resolve().then(s.bind(s,4544))},3005:(e,t,s)=>{"use strict";s.d(t,{dj:()=>l});var a=s(8783);let r=new Map,i=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),d({type:"remove_toast",toastId:e})},1e6);r.set(e,t)},o=(e,t)=>{switch(t.type){case"add_toast":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"update_toast":return{...e,toasts:e.toasts.map(e=>e.id===t.id?{...e,...t.toast}:e)};case"dismiss_toast":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id!==s&&s?e:{...e,dismiss:()=>d({type:"dismiss_toast",toastId:e.id})})}}case"remove_toast":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},n=[],c={toasts:[]};function d(e){c=o(c,e),n.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=crypto.randomUUID(),a=e=>d({type:"update_toast",id:s,toast:e}),r=()=>d({type:"dismiss_toast",toastId:s});return d({type:"add_toast",toast:{...t,id:s,dismiss:r,update:a}}),{id:s,dismiss:r,update:a}}function l(){let[e,t]=a.useState(c);return a.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"dismiss_toast",toastId:e})}}},3499:(e,t,s)=>{"use strict";s.d(t,{QB:()=>r.LoginForm,g2:()=>a.RegistrationForm});var a=s(4980),r=s(806);s(3711)},4544:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(2711),r=s(8783),i=s(8684),o=s(4682),n=s.n(o),c=s(3499),d=s(1875),u=s(3796),l=s(6147),m=s(1318),h=s(3005);function f(){let[e,t]=(0,r.useState)(!1),s=(0,i.useRouter)(),o=(0,i.useSearchParams)().get("returnTo"),{setUser:f,setSession:p}=(0,u.A)(),{redirectAfterAuth:g}=(0,l.u)(),{toast:x}=(0,h.dj)(),v=async e=>{t(!0);try{let t=await d.y1.signUp(e);t.user&&t.session?(f(t.user),p(t.session),x({title:"Account created successfully!",description:"Welcome to BassNotion. You are now signed in."}),g(t.user,o||void 0)):t.user&&!t.session&&(x({title:"Account created!",description:"Please check your email to confirm your account before signing in."}),s.push("/login?message=check-email"))}catch(t){console.error("Registration error:",t);let e="Failed to create account. Please try again.";t instanceof d.lR&&(e=t.message),x({title:"Registration failed",description:e,variant:"destructive"})}finally{t(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Join BassNotion"}),(0,a.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Create your account to start your bass learning journey"})]}),(0,a.jsx)("div",{className:"bg-card rounded-lg border p-6 shadow-sm",children:(0,a.jsx)(c.g2,{onSubmit:v,isLoading:e})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",(0,a.jsx)(m.$,{variant:"link",asChild:!0,className:"p-0 h-auto",children:(0,a.jsx)(n(),{href:"/login".concat(o?"?returnTo=".concat(encodeURIComponent(o)):""),children:"Sign in"})})]})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(m.$,{variant:"ghost",asChild:!0,children:(0,a.jsx)(n(),{href:"/",children:"← Back to Home"})})})]})})}function p(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:(0,a.jsx)(f,{})})}},6147:(e,t,s)=>{"use strict";s.d(t,{u:()=>i});var a=s(8684),r=s(8783);let i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.useRouter)(),{defaultRedirect:s="/dashboard",requireEmailConfirmation:i=!0}=e,o=(0,r.useCallback)((e,a)=>{if(!e)return void t.push("/login");if(i&&!e.email_confirmed_at)return void t.push("/verify-email");let r=a||s;t.push(r)},[t,s,i]);return{redirectAfterAuth:o,redirectToLogin:(0,r.useCallback)(e=>{let s=e?"/login?returnTo=".concat(encodeURIComponent(e)):"/login";t.push(s)},[t]),redirectToDashboard:(0,r.useCallback)(()=>{t.push(s)},[t,s])}}},8684:(e,t,s)=>{"use strict";var a=s(2551);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},e=>{var t=t=>e(e.s=t);e.O(0,[189,10,477,682,338,375,56,358],()=>t(2781)),_N_E=e.O()}]);