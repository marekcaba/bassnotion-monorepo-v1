(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{812:(e,t,s)=>{Promise.resolve().then(s.bind(s,8711))},1553:(e,t,s)=>{"use strict";s.d(t,{N:()=>i});let i=(0,s(8724).UU)("https://htuztkrbuewheehjspcz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh0dXp0a3JidWV3aGVlaGpzcGN6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc3MjY1NTQsImV4cCI6MjA2MzMwMjU1NH0.yqEzmBR8SykKYa3rJlWfAIjiR0EltXn77H2ptuNUqCg",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",debug:!0},global:{headers:{"x-client-info":"@supabase/auth-ui-react@latest"}}})},3005:(e,t,s)=>{"use strict";s.d(t,{dj:()=>d});var i=s(8783);let r=new Map,o=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),l({type:"remove_toast",toastId:e})},1e6);r.set(e,t)},a=(e,t)=>{switch(t.type){case"add_toast":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"update_toast":return{...e,toasts:e.toasts.map(e=>e.id===t.id?{...e,...t.toast}:e)};case"dismiss_toast":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id!==s&&s?e:{...e,dismiss:()=>l({type:"dismiss_toast",toastId:e.id})})}}case"remove_toast":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},n=[],u={toasts:[]};function l(e){u=a(u,e),n.forEach(e=>{e(u)})}function c(e){let{...t}=e,s=crypto.randomUUID(),i=e=>l({type:"update_toast",id:s,toast:e}),r=()=>l({type:"dismiss_toast",toastId:s});return l({type:"add_toast",toast:{...t,id:s,dismiss:r,update:i}}),{id:s,dismiss:r,update:i}}function d(){let[e,t]=i.useState(u);return i.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>l({type:"dismiss_toast",toastId:e})}}},3796:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s(7543),r=s(53);let o=(0,i.v)()((0,r.lt)(e=>({user:null,session:null,isLoading:!0,isInitialized:!1,setUser:t=>e({user:t}),setSession:t=>e({session:t}),setLoading:t=>e({isLoading:t}),setInitialized:t=>e({isInitialized:t}),reset:()=>e({user:null,session:null,isLoading:!1,isInitialized:!0})}),{name:"auth-store"})),a=()=>{let e=o();return{...e,isAuthenticated:!!(e.user&&e.session),isReady:e.isInitialized&&!e.isLoading}}},6147:(e,t,s)=>{"use strict";s.d(t,{u:()=>o});var i=s(8684),r=s(8783);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.useRouter)(),{defaultRedirect:s="/dashboard",requireEmailConfirmation:o=!0}=e,a=(0,r.useCallback)((e,i)=>{if(!e)return void t.push("/login");if(o&&!e.email_confirmed_at)return void t.push("/verify-email");let r=i||s;t.push(r)},[t,s,o]);return{redirectAfterAuth:a,redirectToLogin:(0,r.useCallback)(e=>{let s=e?"/login?returnTo=".concat(encodeURIComponent(e)):"/login";t.push(s)},[t]),redirectToDashboard:(0,r.useCallback)(()=>{t.push(s)},[t,s])}}},8711:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var i=s(2711),r=s(8783),o=s(8684),a=s(1553),n=s(3005),u=s(3796),l=s(6147);function c(){let e=(0,o.useRouter)(),t=(0,o.useSearchParams)(),{toast:s}=(0,n.dj)(),{setUser:c,setSession:d}=(0,u.A)(),{redirectAfterAuth:h}=(0,l.u)(),p=t.get("returnTo");return(0,r.useEffect)(()=>{(async()=>{console.debug("[Auth Debug] Callback URL info:",{fullUrl:window.location.href,pathname:window.location.pathname,search:window.location.search,hash:window.location.hash});try{let{data:{session:i},error:r}=await a.N.auth.getSession();if(console.debug("[Auth Debug] Current session check:",{hasSession:!!i,error:r}),i){c(i.user),d(i),s({title:"Success",description:"You have been signed in successfully."}),h(i.user,p||void 0);return}let o=t.get("code"),n=t.get("error"),u=t.get("error_description");if(n){console.error("[Auth Debug] OAuth error:",{error:n,description:u}),s({title:"Authentication Error",description:u||n,variant:"destructive"}),e.push("/login");return}if(!o){console.error("[Auth Debug] No code found and no session available"),s({title:"Error",description:"Authentication failed. Please try again.",variant:"destructive"}),e.push("/login");return}console.debug("[Auth Debug] Exchanging code for session...");let{data:l,error:f}=await a.N.auth.exchangeCodeForSession(o);if(f)throw console.error("[Auth Debug] Session exchange error:",f),f;if(!l.session||!l.user)throw Error("No session or user data received");c(l.user),d(l.session),s({title:"Success",description:"You have been signed in successfully.",variant:"default"}),h(l.user,p||void 0)}catch(t){console.error("[Auth Debug] Callback handling error:",t),s({title:"Error",description:t instanceof Error?t.message:"Authentication failed",variant:"destructive"}),e.push("/login")}})()},[e,t,s,c,d,h,p]),(0,i.jsx)("div",{className:"flex h-screen w-screen items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold",children:"Completing sign in..."}),(0,i.jsx)("p",{className:"text-muted-foreground mt-2",children:"Please wait while we verify your credentials."})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[948,375,56,358],()=>t(812)),_N_E=e.O()}]);