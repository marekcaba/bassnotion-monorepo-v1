(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{2994:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(2711),i=s(8783),n=s(8684),r=s(4682),o=s.n(r),c=s(3499),d=s(1875),l=s(3796),u=s(6147),m=s(1318),h=s(3005);function f(){let[e,t]=(0,i.useState)(!1),s=(0,n.useSearchParams)(),r=s.get("returnTo"),f=s.get("message"),{setUser:g,setSession:p}=(0,l.A)(),{redirectAfterAuth:v}=(0,u.u)(),{toast:x}=(0,h.dj)();(0,i.useEffect)(()=>{"check-email"===f&&x({title:"Check your email",description:"Please check your email and click the confirmation link before signing in."})},[f,x]);let y=async e=>{t(!0);try{let t=await d.y1.signIn(e);t.user&&t.session&&(g(t.user),p(t.session),x({title:"Welcome back!",description:"You have been signed in successfully."}),v(t.user,r||void 0))}catch(t){console.error("Login error:",t);let e="Failed to sign in. Please check your credentials and try again.";t instanceof d.lR&&(e=t.message,t.message.includes("Invalid login credentials")?e="Invalid email or password. Please check your credentials and try again.":t.message.includes("Email not confirmed")&&(e="Please check your email and click the confirmation link before signing in.")),x({title:"Sign in failed",description:e,variant:"destructive"})}finally{t(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Welcome Back"}),(0,a.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Sign in to your BassNotion account"})]}),(0,a.jsx)("div",{className:"bg-card rounded-lg border p-6 shadow-sm",children:(0,a.jsx)(c.QB,{onSubmit:y,isLoading:e})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Don't have an account?"," ",(0,a.jsx)(m.$,{variant:"link",asChild:!0,className:"p-0 h-auto",children:(0,a.jsx)(o(),{href:"/register".concat(r?"?returnTo=".concat(encodeURIComponent(r)):""),children:"Create account"})})]})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(m.$,{variant:"ghost",asChild:!0,children:(0,a.jsx)(o(),{href:"/",children:"← Back to Home"})})})]})})}function g(){return(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:(0,a.jsx)(f,{})})}},3005:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u});var a=s(8783);let i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"remove_toast",toastId:e})},1e6);i.set(e,t)},r=(e,t)=>{switch(t.type){case"add_toast":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"update_toast":return{...e,toasts:e.toasts.map(e=>e.id===t.id?{...e,...t.toast}:e)};case"dismiss_toast":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id!==s&&s?e:{...e,dismiss:()=>d({type:"dismiss_toast",toastId:e.id})})}}case"remove_toast":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=r(c,e),o.forEach(e=>{e(c)})}function l(e){let{...t}=e,s=crypto.randomUUID(),a=e=>d({type:"update_toast",id:s,toast:e}),i=()=>d({type:"dismiss_toast",toastId:s});return d({type:"add_toast",toast:{...t,id:s,dismiss:i,update:a}}),{id:s,dismiss:i,update:a}}function u(){let[e,t]=a.useState(c);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:l,dismiss:e=>d({type:"dismiss_toast",toastId:e})}}},3499:(e,t,s)=>{"use strict";s.d(t,{QB:()=>i.LoginForm,g2:()=>a.RegistrationForm});var a=s(4980),i=s(806);s(3711)},4553:(e,t,s)=>{Promise.resolve().then(s.bind(s,2994))},6147:(e,t,s)=>{"use strict";s.d(t,{u:()=>n});var a=s(8684),i=s(8783);let n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.useRouter)(),{defaultRedirect:s="/dashboard",requireEmailConfirmation:n=!0}=e,r=(0,i.useCallback)((e,a)=>{if(!e)return void t.push("/login");if(n&&!e.email_confirmed_at)return void t.push("/verify-email");let i=a||s;t.push(i)},[t,s,n]);return{redirectAfterAuth:r,redirectToLogin:(0,i.useCallback)(e=>{let s=e?"/login?returnTo=".concat(encodeURIComponent(e)):"/login";t.push(s)},[t]),redirectToDashboard:(0,i.useCallback)(()=>{t.push(s)},[t,s])}}},8684:(e,t,s)=>{"use strict";var a=s(2551);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},e=>{var t=t=>e(e.s=t);e.O(0,[189,10,99,682,338,375,56,358],()=>t(4553)),_N_E=e.O()}]);