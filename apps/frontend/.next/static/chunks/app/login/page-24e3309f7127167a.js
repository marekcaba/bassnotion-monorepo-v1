(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{482:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var r=n(2711),a=n(8783),i=n(8684),s=n(4682),o=n.n(s),l=n(3499),c=n(3005),d=n(689),u=n(9639),f=n(6374);function m(){let[e,t]=(0,a.useState)(""),[n,i]=(0,a.useState)(!1),[s,o]=(0,a.useState)(!1),{toast:l}=(0,c.dj)(),m=async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{i(!0);let{error:n}=await f.y1.signInWithMagicLink(e,t);if(n)throw n;l({title:"Check your email",description:t?"We sent you a magic link to create your account and sign in.":"We sent you a magic link to sign in."}),o(!1)}catch(e){l({title:"Error",description:e instanceof Error?e.message:"Failed to send magic link",variant:"destructive"})}finally{i(!1)}},g=async t=>{t.preventDefault();try{i(!0),o(!1);let{exists:t,error:n}=await f.y1.checkUserExists(e);if(n)throw n;if(!t)return void o(!0);await m(!1)}catch(e){l({title:"Error",description:e instanceof Error?e.message:"Failed to check email",variant:"destructive"})}finally{i(!1)}};return(0,r.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,r.jsxs)("form",{onSubmit:g,className:"flex flex-col space-y-4",children:[(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(u.p,{type:"email",placeholder:"Enter your email",value:e,onChange:e=>t(e.target.value),disabled:n,required:!0})}),(0,r.jsx)(d.$,{type:"submit",disabled:n,children:n?"Processing...":"Continue with Magic Link"})]}),s&&(0,r.jsxs)("div",{className:"mt-2 p-4 border rounded-lg bg-muted",children:[(0,r.jsxs)("p",{className:"text-sm mb-2",children:["No account exists for ",e,"."]}),(0,r.jsx)(d.$,{onClick:()=>m(!0),disabled:n,variant:"secondary",className:"w-full",children:"Create New Account"})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"We'll send you a magic link to sign in instantly."})]})}var g=n(8e3),v=n(3796),h=n(6147),p=n(5841);function b(){let e=(0,i.useRouter)(),[t,n]=(0,a.useState)(!1),[s,u]=(0,a.useState)(!1),b=(0,i.useSearchParams)(),x=b.get("returnTo"),y=b.get("message"),{setUser:w,setSession:j}=(0,v.A)(),{redirectAfterAuth:k}=(0,h.u)(),{toast:N}=(0,c.dj)();(0,a.useEffect)(()=>{"check-email"===y&&N({title:"Check your email",description:"Please check your email and click the confirmation link before signing in."})},[y,N]);let C=async t=>{try{n(!0);{let n=await f.y1.signInWithBackend(t);if(n.success)N({title:"Welcome back!",description:"You have been signed in successfully."}),e.push("/dashboard");else{var r;throw Error((null==(r=n.error)?void 0:r.message)||"Login failed")}}}catch(t){console.error("Login error:",t);let e="Failed to sign in. Please check your credentials and try again.";t instanceof Error&&(e=t.message,t instanceof g.lR&&(t.message.includes("Invalid login credentials")?e="Invalid email or password. Please check your credentials and try again.":t.message.includes("Email not confirmed")&&(e="Please check your email and click the confirmation link before signing in."))),N({title:"Sign in failed",description:e,variant:"destructive"})}finally{n(!1)}},R=async()=>{try{u(!0),await f.y1.signInWithGoogle()}catch(e){N({title:"Error",description:e instanceof Error?e.message:"Failed to sign in with Google",variant:"destructive"}),u(!1)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,r.jsx)("div",{className:"bg-card rounded-lg border p-6 shadow-sm",children:(0,r.jsxs)(p.tU,{defaultValue:"password",className:"space-y-6",children:[(0,r.jsxs)(p.j7,{className:"grid w-full grid-cols-2",children:[(0,r.jsx)(p.Xi,{value:"password",children:"Password"}),(0,r.jsx)(p.Xi,{value:"magic-link",children:"Magic Link"})]}),(0,r.jsx)(p.av,{value:"password",children:(0,r.jsx)(l.QB,{onSubmit:C,onGoogleSignIn:R,isLoading:t,isGoogleLoading:s})}),(0,r.jsx)(p.av,{value:"magic-link",children:(0,r.jsx)(m,{})})]})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Don't have an account?"," ",(0,r.jsx)(d.$,{variant:"link",asChild:!0,className:"p-0 h-auto",children:(0,r.jsx)(o(),{href:"/register".concat(x?"?returnTo=".concat(encodeURIComponent(x)):""),children:"Create account"})})]})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(d.$,{variant:"ghost",asChild:!0,children:(0,r.jsx)(o(),{href:"/",children:"â† Back to Home"})})})]})})}function x(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:(0,r.jsx)(b,{})})}},3499:(e,t,n)=>{"use strict";n.d(t,{QB:()=>a.LoginForm,g2:()=>r.RegistrationForm});var r=n(4980),a=n(806);n(1907)},4553:(e,t,n)=>{Promise.resolve().then(n.bind(n,482))},5841:(e,t,n)=>{"use strict";n.d(t,{tU:()=>z,av:()=>Y,j7:()=>H,Xi:()=>Q});var r=n(2711),a=n(8783),i=n(7741),s=n(6462),o=n(6532),l=n(5790),c=n(7137),d=n(3745),u=n(4641),f=n(9923),m=a.createContext(void 0);function g(e){let t=a.useContext(m);return e||t||"ltr"}var v="rovingFocusGroup.onEntryFocus",h={bubbles:!1,cancelable:!0},p="RovingFocusGroup",[b,x,y]=(0,o.N)(p),[w,j]=(0,s.A)(p,[y]),[k,N]=w(p),C=a.forwardRef((e,t)=>(0,r.jsx)(b.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,r.jsx)(b.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,r.jsx)(R,{...e,ref:t})})}));C.displayName=p;var R=a.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,orientation:s,loop:o=!1,dir:c,currentTabStopId:m,defaultCurrentTabStopId:b,onCurrentTabStopIdChange:y,onEntryFocus:w,preventScrollOnEntryFocus:j=!1,...N}=e,C=a.useRef(null),R=(0,l.s)(t,C),E=g(c),[I,F]=(0,f.i)({prop:m,defaultProp:null!=b?b:null,onChange:y,caller:p}),[D,S]=a.useState(!1),A=(0,u.c)(w),L=x(n),G=a.useRef(!1),[P,_]=a.useState(0);return a.useEffect(()=>{let e=C.current;if(e)return e.addEventListener(v,A),()=>e.removeEventListener(v,A)},[A]),(0,r.jsx)(k,{scope:n,orientation:s,dir:E,loop:o,currentTabStopId:I,onItemFocus:a.useCallback(e=>F(e),[F]),onItemShiftTab:a.useCallback(()=>S(!0),[]),onFocusableItemAdd:a.useCallback(()=>_(e=>e+1),[]),onFocusableItemRemove:a.useCallback(()=>_(e=>e-1),[]),children:(0,r.jsx)(d.sG.div,{tabIndex:D||0===P?-1:0,"data-orientation":s,...N,ref:R,style:{outline:"none",...e.style},onMouseDown:(0,i.m)(e.onMouseDown,()=>{G.current=!0}),onFocus:(0,i.m)(e.onFocus,e=>{let t=!G.current;if(e.target===e.currentTarget&&t&&!D){let t=new CustomEvent(v,h);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=L().filter(e=>e.focusable);T([e.find(e=>e.active),e.find(e=>e.id===I),...e].filter(Boolean).map(e=>e.ref.current),j)}}G.current=!1}),onBlur:(0,i.m)(e.onBlur,()=>S(!1))})})}),E="RovingFocusGroupItem",I=a.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,focusable:s=!0,active:o=!1,tabStopId:l,children:u,...f}=e,m=(0,c.B)(),g=l||m,v=N(E,n),h=v.currentTabStopId===g,p=x(n),{onFocusableItemAdd:y,onFocusableItemRemove:w,currentTabStopId:j}=v;return a.useEffect(()=>{if(s)return y(),()=>w()},[s,y,w]),(0,r.jsx)(b.ItemSlot,{scope:n,id:g,focusable:s,active:o,children:(0,r.jsx)(d.sG.span,{tabIndex:h?0:-1,"data-orientation":v.orientation,...f,ref:t,onMouseDown:(0,i.m)(e.onMouseDown,e=>{s?v.onItemFocus(g):e.preventDefault()}),onFocus:(0,i.m)(e.onFocus,()=>v.onItemFocus(g)),onKeyDown:(0,i.m)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void v.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,n){var r;let a=(r=e.key,"rtl"!==n?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return F[a]}(e,v.orientation,v.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();let r=n.indexOf(e.currentTarget);n=v.loop?function(e,t){return e.map((n,r)=>e[(t+r)%e.length])}(n,r+1):n.slice(r+1)}setTimeout(()=>T(n))}}),children:"function"==typeof u?u({isCurrentTabStop:h,hasTabStop:null!=j}):u})})});I.displayName=E;var F={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function T(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.activeElement;for(let r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}var D=n(2181),S="Tabs",[A,L]=(0,s.A)(S,[j]),G=j(),[P,_]=A(S),K=a.forwardRef((e,t)=>{let{__scopeTabs:n,value:a,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:u="automatic",...m}=e,v=g(l),[h,p]=(0,f.i)({prop:a,onChange:i,defaultProp:null!=s?s:"",caller:S});return(0,r.jsx)(P,{scope:n,baseId:(0,c.B)(),value:h,onValueChange:p,orientation:o,dir:v,activationMode:u,children:(0,r.jsx)(d.sG.div,{dir:v,"data-orientation":o,...m,ref:t})})});K.displayName=S;var M="TabsList",B=a.forwardRef((e,t)=>{let{__scopeTabs:n,loop:a=!0,...i}=e,s=_(M,n),o=G(n);return(0,r.jsx)(C,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:a,children:(0,r.jsx)(d.sG.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})});B.displayName=M;var U="TabsTrigger",W=a.forwardRef((e,t)=>{let{__scopeTabs:n,value:a,disabled:s=!1,...o}=e,l=_(U,n),c=G(n),u=O(l.baseId,a),f=X(l.baseId,a),m=a===l.value;return(0,r.jsx)(I,{asChild:!0,...c,focusable:!s,active:m,children:(0,r.jsx)(d.sG.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":f,"data-state":m?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...o,ref:t,onMouseDown:(0,i.m)(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(a)}),onKeyDown:(0,i.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(a)}),onFocus:(0,i.m)(e.onFocus,()=>{let e="manual"!==l.activationMode;m||s||!e||l.onValueChange(a)})})})});W.displayName=U;var V="TabsContent",$=a.forwardRef((e,t)=>{let{__scopeTabs:n,value:i,forceMount:s,children:o,...l}=e,c=_(V,n),u=O(c.baseId,i),f=X(c.baseId,i),m=i===c.value,g=a.useRef(m);return a.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,r.jsx)(D.C,{present:s||m,children:n=>{let{present:a}=n;return(0,r.jsx)(d.sG.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!a,id:f,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:g.current?"0s":void 0},children:a&&o})}})});function O(e,t){return"".concat(e,"-trigger-").concat(t)}function X(e,t){return"".concat(e,"-content-").concat(t)}$.displayName=V;var q=n(6709);let z=K,H=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(B,{ref:t,className:(0,q.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n),...a})});H.displayName=B.displayName;let Q=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(W,{ref:t,className:(0,q.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n),...a})});Q.displayName=W.displayName;let Y=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)($,{ref:t,className:(0,q.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...a})});Y.displayName=$.displayName},6147:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});var r=n(8684),a=n(8783);let i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.useRouter)(),{defaultRedirect:n="/dashboard",requireEmailConfirmation:i=!0}=e,s=(0,a.useCallback)((e,r)=>{if(!e)return void t.push("/login");if(i&&!e.email_confirmed_at)return void t.push("/verify-email");let a=r||n;t.push(a)},[t,n,i]);return{redirectAfterAuth:s,redirectToLogin:(0,a.useCallback)(e=>{let n=e?"/login?returnTo=".concat(encodeURIComponent(e)):"/login";t.push(n)},[t]),redirectToDashboard:(0,a.useCallback)(()=>{t.push(n)},[t,n])}}}},e=>{var t=t=>e(e.s=t);e.O(0,[948,189,477,960,682,532,762,407,375,56,358],()=>t(4553)),_N_E=e.O()}]);