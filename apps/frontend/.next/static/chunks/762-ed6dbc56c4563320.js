"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[762],{689:(e,t,r)=>{r.d(t,{$:()=>d});var s=r(2711),a=r(1426),i=r(8783),o=r(6709),n=r(1366);let d=i.forwardRef((e,t)=>{let{className:r,variant:i,size:d,asChild:l=!1,...c}=e,u=l?a.DX:"button",m=(0,n.r)({variant:i,size:d,className:r});return(0,s.jsx)(u,{className:(0,o.cn)(m),ref:t,...c})});d.displayName="Button"},833:(e,t,r)=>{r.d(t,{lV:()=>g,MJ:()=>y,zB:()=>f,eI:()=>w,lR:()=>b,C5:()=>v});var s=r(2711),a=r(1426),i=r(8783),o=r(6705),n=r(2669),d=r(4655),l=r(6709);let c=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=i.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.b,{ref:t,className:(0,l.cn)(c(),r),...a})});u.displayName=n.b.displayName;let m=i.createContext({}),h=i.createContext({});function p(){let e=i.useContext(m),t=i.useContext(h),{getFieldState:r,formState:s}=(0,o.xW)(),a=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...a}}let g=o.Op,f=e=>{let{...t}=e;return(0,s.jsx)(m.Provider,{value:{name:t.name},children:(0,s.jsx)(o.xI,{...t})})},w=i.forwardRef((e,t)=>{let{className:r,...a}=e,o=i.useId();return(0,s.jsx)(h.Provider,{value:{id:o},children:(0,s.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",r),...a})})});w.displayName="FormItem";let b=i.forwardRef((e,t)=>{let{className:r,...a}=e,{error:i,formItemId:o}=p();return(0,s.jsx)(u,{ref:t,className:(0,l.cn)(i&&"text-destructive",r),htmlFor:o,...a})});b.displayName="FormLabel";let y=i.forwardRef((e,t)=>{let{...r}=e,{error:i,formItemId:o,formDescriptionId:n,formMessageId:d}=p();return(0,s.jsx)(a.DX,{ref:t,id:o,"aria-describedby":i?"".concat(n," ").concat(d):"".concat(n),"aria-invalid":!!i,...r})});y.displayName="FormControl",i.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:i}=p();return(0,s.jsx)("p",{ref:t,id:i,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})}).displayName="FormDescription";let v=i.forwardRef((e,t)=>{let{className:r,children:a,...i}=e,{error:o,formMessageId:n}=p(),d=o?String(null==o?void 0:o.message):a;return d?(0,s.jsx)("p",{ref:t,id:n,className:(0,l.cn)("text-sm font-medium text-destructive",r),...i,children:d}):null});v.displayName="FormMessage"},1366:(e,t,r)=>{r.d(t,{r:()=>s});let s=(0,r(4655).F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}})},1553:(e,t,r)=>{r.d(t,{N:()=>s});let s=(0,r(8724).UU)("https://htuztkrbuewheehjspcz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh0dXp0a3JidWV3aGVlaGpzcGN6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc3MjY1NTQsImV4cCI6MjA2MzMwMjU1NH0.yqEzmBR8SykKYa3rJlWfAIjiR0EltXn77H2ptuNUqCg",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",debug:!0},global:{headers:{"x-client-info":"@supabase/auth-ui-react@latest"}}})},3005:(e,t,r)=>{r.d(t,{dj:()=>u});var s=r(8783);let a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),l({type:"remove_toast",toastId:e})},1e6);a.set(e,t)},o=(e,t)=>{switch(t.type){case"add_toast":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"update_toast":return{...e,toasts:e.toasts.map(e=>e.id===t.id?{...e,...t.toast}:e)};case"dismiss_toast":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id!==r&&r?e:{...e,dismiss:()=>l({type:"dismiss_toast",toastId:e.id})})}}case"remove_toast":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},n=[],d={toasts:[]};function l(e){d=o(d,e),n.forEach(e=>{e(d)})}function c(e){let{...t}=e,r=crypto.randomUUID(),s=e=>l({type:"update_toast",id:r,toast:e}),a=()=>l({type:"dismiss_toast",toastId:r});return l({type:"add_toast",toast:{...t,id:r,dismiss:a,update:s}}),{id:r,dismiss:a,update:s}}function u(){let[e,t]=s.useState(d);return s.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>l({type:"dismiss_toast",toastId:e})}}},3796:(e,t,r)=>{r.d(t,{A:()=>o});var s=r(7543),a=r(53);let i=(0,s.v)()((0,a.lt)(e=>({user:null,session:null,isLoading:!0,isInitialized:!1,setUser:t=>e({user:t}),setSession:t=>e({session:t}),setLoading:t=>e({isLoading:t}),setInitialized:t=>e({isInitialized:t}),reset:()=>e({user:null,session:null,isLoading:!1,isInitialized:!0})}),{name:"auth-store"})),o=()=>{let e=i();return{...e,isAuthenticated:!!(e.user&&e.session),isReady:e.isInitialized&&!e.isLoading}}},6374:(e,t,r)=>{r.d(t,{y1:()=>o});var s=r(1553),a=r(8e3);class i{get backendUrl(){return"http://localhost:3001"}async signUpWithBackend(e){try{let t=await fetch("".concat(this.backendUrl,"/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok)throw Error(r.message||"Registration failed");return r}catch(e){throw console.error("[Auth Debug] Backend registration error:",e),e}}async signInWithBackend(e){try{let t=await fetch("".concat(this.backendUrl,"/auth/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok)throw Error(r.message||"Login failed");return r}catch(e){throw console.error("[Auth Debug] Backend login error:",e),e}}async signUp(e){let{data:t,error:r}=await s.N.auth.signUp({email:e.email,password:e.password});if(r)throw r;return t}async signIn(e){let{data:t,error:r}=await s.N.auth.signInWithPassword({email:e.email,password:e.password});if(r)throw r;return t}async signOut(){let{error:e}=await s.N.auth.signOut();if(e)throw e}async getCurrentSession(){let{data:e,error:t}=await s.N.auth.getSession();if(t)throw t;return e}async getCurrentUser(){let{data:e,error:t}=await s.N.auth.getUser();if(t)throw t;return e}onAuthStateChange(e){return s.N.auth.onAuthStateChange(e)}async refreshSession(){let{data:e,error:t}=await s.N.auth.refreshSession();if(t)throw t;return e}async signInWithGoogle(){try{let e="".concat(window.location.origin,"/auth/callback");console.debug("[Auth Debug] Initiating Google sign-in...",{redirectUrl:e,currentUrl:window.location.href,origin:window.location.origin,supabaseUrl:"https://htuztkrbuewheehjspcz.supabase.co"});let{data:t,error:r}=await s.N.auth.signInWithOAuth({provider:"google",options:{redirectTo:e,queryParams:{access_type:"offline",prompt:"consent"}}});if(r)throw console.error("[Auth Debug] Google sign-in error:",{code:r.status,message:r.message,name:r.name,stack:r.stack}),r;return console.debug("[Auth Debug] Google sign-in response:",{hasProvider:!!t.provider,hasUrl:!!t.url,url:t.url,provider:t.provider}),t}catch(e){if(console.error("[Auth Debug] Unexpected error during Google sign-in:",{error:e,isAuthError:e instanceof a.lR}),e instanceof a.lR)throw e;throw Error("An unexpected error occurred during Google sign-in")}}async checkUserExists(e){try{let{data:t,error:r}=await s.N.rpc("check_user_exists",{email_input:e});if(r)throw r;return{exists:!!t,error:null}}catch(e){return console.error("[Auth Debug] Check user exists error:",e),{exists:!1,error:e}}}async signInWithMagicLink(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{console.debug("[Auth Debug] Sending magic link:",{email:e,isNewUser:t});let{data:r,error:a}=await s.N.auth.signInWithOtp({email:e,options:{shouldCreateUser:t,emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});if(a)throw a;return{data:r,error:null}}catch(e){if(console.error("[Auth Debug] Magic link error:",e),e instanceof a.lR)return{data:null,error:e};throw e}}async updatePassword(e,t){try{let{data:e,error:r}=await s.N.auth.updateUser({password:t});if(r)throw r;return e}catch(e){throw console.error("[Auth Debug] Password update error:",e),e}}}let o=new i},6709:(e,t,r)=>{r.d(t,{cn:()=>i});var s=r(1511),a=r(1142);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},8558:(e,t,r)=>{r.d(t,{nM:()=>m,X5:()=>c,LE:()=>u});var s,a=r(5247);let i={email:{required:"Email is required",invalid:"Invalid email format"},password:{required:"Password is required",minLength:"Password must be at least 8 characters",strength:"Password must contain uppercase, lowercase, number and special character",mismatch:"Passwords don't match"},displayName:{required:"Display name is required",minLength:"Display name must be at least 2 characters"}},o=a.z.string().min(1,i.email.required).email(i.email.invalid),n=a.z.string().min(8,i.password.minLength).regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9!@#$%^&*])/,i.password.strength),d=a.z.string().min(2,i.displayName.minLength),l=a.z.string().optional(),c=a.z.object({email:o,password:a.z.string().min(1,i.password.required)}),u=a.z.object({email:o,password:n,confirmPassword:a.z.string()}).refine(e=>e.password===e.confirmPassword,{message:i.password.mismatch,path:["confirmPassword"]});a.z.object({email:o,password:n,confirmPassword:a.z.string(),displayName:a.z.string().min(2,i.displayName.minLength),bio:a.z.string().optional()}).refine(e=>e.password===e.confirmPassword,{message:i.password.mismatch,path:["confirmPassword"]});let m=a.z.object({currentPassword:a.z.string().min(1,i.password.required),newPassword:n,confirmPassword:a.z.string()}).refine(e=>e.newPassword===e.confirmPassword,{message:i.password.mismatch,path:["confirmPassword"]});a.z.object({displayName:d,bio:l,avatarUrl:a.z.string().url().optional()}),a.z.object({theme:a.z.enum(["light","dark"]).default("dark"),emailNotifications:a.z.boolean().default(!0),defaultMetronomeSettings:a.z.object({bpm:a.z.number().min(40).max(300).default(120),timeSignature:a.z.string().default("4/4"),sound:a.z.enum(["click","beep","wood"]).default("click")})}),a.z.object({id:a.z.string(),email:o,displayName:d,bio:l,avatarUrl:a.z.string().url().optional(),createdAt:a.z.string(),updatedAt:a.z.string()}),function(e){e.AVAILABLE="available",e.CONSUMED="consumed",e.EXPIRED="expired"}(s||(s={}))},9639:(e,t,r)=>{r.d(t,{p:()=>o});var s=r(2711),a=r(8783),i=r(6709);let o=a.forwardRef((e,t)=>{let{className:r,type:a,...o}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});o.displayName="Input"}}]);