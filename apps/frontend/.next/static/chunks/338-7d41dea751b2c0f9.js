"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[338],{806:(e,s,r)=>{r.d(s,{LoginForm:()=>p});var t=r(2711),a=r(6291),n=r(8558),i=r(7538),o=r(3078),l=r(6941),d=r(8783),c=r(6705),m=r(1318),u=r(833),h=r(9639);function p(e){let{onSubmit:s,isLoading:r=!1,className:p}=e,[x,f]=(0,d.useState)(!1),g=(0,c.mN)({resolver:(0,a.u)(n.X5),mode:"onChange",defaultValues:{email:"",password:""}}),w=async e=>{try{await s(e)}catch(e){console.error("Login error:",e)}},j=()=>f(!x);return(0,t.jsxs)("div",{className:p,children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-center",children:"Welcome Back"}),(0,t.jsx)("p",{className:"text-muted-foreground text-center mt-2",children:"Sign in to continue your bass learning journey"})]}),(0,t.jsx)(u.lV,{...g,children:(0,t.jsxs)("form",{onSubmit:g.handleSubmit(w),className:"space-y-4",children:[(0,t.jsx)(u.zB,{control:g.control,name:"email",render:e=>{let{field:s}=e;return(0,t.jsxs)(u.eI,{children:[(0,t.jsx)(u.lR,{children:"Email"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(h.p,{type:"email",placeholder:"Enter your email",autoComplete:"email",disabled:r,...s})}),(0,t.jsx)(u.C5,{})]})}}),(0,t.jsx)(u.zB,{control:g.control,name:"password",render:e=>{let{field:s}=e;return(0,t.jsxs)(u.eI,{children:[(0,t.jsx)(u.lR,{children:"Password"}),(0,t.jsx)(u.MJ,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.p,{type:x?"text":"password",placeholder:"Enter your password",autoComplete:"current-password",disabled:r,...s}),(0,t.jsxs)(m.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:j,disabled:r,children:[x?(0,t.jsx)(i.A,{className:"h-4 w-4"}):(0,t.jsx)(o.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:x?"Hide password":"Show password"})]})]})}),(0,t.jsx)(u.C5,{})]})}}),(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)(m.$,{variant:"link",className:"p-0 h-auto text-sm",children:"Forgot password?"})}),(0,t.jsx)(m.$,{type:"submit",className:"w-full",disabled:r||!g.formState.isValid,children:r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing In..."]}):"Sign In"})]})}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Don't have an account?"," ",(0,t.jsx)(m.$,{variant:"link",className:"p-0 h-auto",children:"Create account"})]})})]})}},833:(e,s,r)=>{r.d(s,{lV:()=>x,MJ:()=>j,zB:()=>f,eI:()=>g,lR:()=>w,C5:()=>b});var t=r(2711),a=r(1426),n=r(8783),i=r(6705),o=r(2669),l=r(4655),d=r(6709);let c=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),m=n.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(o.b,{ref:s,className:(0,d.cn)(c(),r),...a})});m.displayName=o.b.displayName;let u=n.createContext({}),h=n.createContext({});function p(){let e=n.useContext(u),s=n.useContext(h),{getFieldState:r,formState:t}=(0,i.xW)(),a=r(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=s;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...a}}let x=i.Op,f=e=>{let{...s}=e;return(0,t.jsx)(u.Provider,{value:{name:s.name},children:(0,t.jsx)(i.xI,{...s})})},g=n.forwardRef((e,s)=>{let{className:r,...a}=e,i=n.useId();return(0,t.jsx)(h.Provider,{value:{id:i},children:(0,t.jsx)("div",{ref:s,className:(0,d.cn)("space-y-2",r),...a})})});g.displayName="FormItem";let w=n.forwardRef((e,s)=>{let{className:r,...a}=e,{error:n,formItemId:i}=p();return(0,t.jsx)(m,{ref:s,className:(0,d.cn)(n&&"text-destructive",r),htmlFor:i,...a})});w.displayName="FormLabel";let j=n.forwardRef((e,s)=>{let{...r}=e,{error:n,formItemId:i,formDescriptionId:o,formMessageId:l}=p();return(0,t.jsx)(a.DX,{ref:s,id:i,"aria-describedby":n?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!n,...r})});j.displayName="FormControl",n.forwardRef((e,s)=>{let{className:r,...a}=e,{formDescriptionId:n}=p();return(0,t.jsx)("p",{ref:s,id:n,className:(0,d.cn)("text-sm text-muted-foreground",r),...a})}).displayName="FormDescription";let b=n.forwardRef((e,s)=>{let{className:r,children:a,...n}=e,{error:i,formMessageId:o}=p(),l=i?String(null==i?void 0:i.message):a;return l?(0,t.jsx)("p",{ref:s,id:o,className:(0,d.cn)("text-sm font-medium text-destructive",r),...n,children:l}):null});b.displayName="FormMessage"},1318:(e,s,r)=>{r.d(s,{$:()=>l});var t=r(2711),a=r(1426),n=r(8783),i=r(6709);let o=(0,r(4655).F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,s)=>{let{className:r,variant:n,size:l,asChild:d=!1,...c}=e,m=d?a.DX:"button",u=o({variant:n,size:l,className:r});return(0,t.jsx)(m,{className:(0,i.cn)(u),ref:s,...c})});l.displayName="Button"},1875:(e,s,r)=>{r.d(s,{lR:()=>i,y1:()=>l});var t=r(2745),a=r(5205);if(!a.env.NEXT_PUBLIC_SUPABASE_URL)throw Error("Missing environment variable: NEXT_PUBLIC_SUPABASE_URL");if(!a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)throw Error("Missing environment variable: NEXT_PUBLIC_SUPABASE_ANON_KEY");let n=(0,t.UU)(a.env.NEXT_PUBLIC_SUPABASE_URL,a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});class i extends Error{constructor(e,s){super(e),this.code=s,this.name="AuthError"}}class o{async signUp(e){let{data:s,error:r}=await n.auth.signUp({email:e.email,password:e.password});if(r){var t;throw new i(r.message,null==(t=r.status)?void 0:t.toString())}return s}async signIn(e){let{data:s,error:r}=await n.auth.signInWithPassword({email:e.email,password:e.password});if(r){var t;throw new i(r.message,null==(t=r.status)?void 0:t.toString())}return s}async signOut(){let{error:e}=await n.auth.signOut();if(e)throw new i(e.message)}async getCurrentSession(){let{data:e,error:s}=await n.auth.getSession();if(s)throw new i(s.message);return e}async getCurrentUser(){let{data:e,error:s}=await n.auth.getUser();if(s)throw new i(s.message);return e}onAuthStateChange(e){return n.auth.onAuthStateChange(e)}async refreshSession(){let{data:e,error:s}=await n.auth.refreshSession();if(s)throw new i(s.message);return e}}let l=new o},3711:(e,s,r)=>{r.d(s,{AuthProvider:()=>o});var t=r(2711),a=r(8783),n=r(1875),i=r(3796);function o(e){let{children:s}=e,{setUser:r,setSession:o,setLoading:l,setInitialized:d,reset:c}=(0,i.A)();return(0,a.useEffect)(()=>{(async()=>{try{l(!0);let{session:e}=await n.y1.getCurrentSession();e?(r(e.user),o(e)):c()}catch(e){console.error("Error initializing auth:",e),c()}finally{l(!1),d(!0)}})();let{data:{subscription:e}}=n.y1.onAuthStateChange(async(e,s)=>{console.log("Auth state changed:",e,s),s?(r(s.user),o(s)):c(),l(!1),d(!0)});return()=>{e.unsubscribe()}},[r,o,l,d,c]),(0,t.jsx)(t.Fragment,{children:s})}},3796:(e,s,r)=>{r.d(s,{A:()=>i});var t=r(7543),a=r(53);let n=(0,t.v)()((0,a.lt)(e=>({user:null,session:null,isLoading:!0,isInitialized:!1,setUser:s=>e({user:s}),setSession:s=>e({session:s}),setLoading:s=>e({isLoading:s}),setInitialized:s=>e({isInitialized:s}),reset:()=>e({user:null,session:null,isLoading:!1,isInitialized:!0})}),{name:"auth-store"})),i=()=>{let e=n();return{...e,isAuthenticated:!!(e.user&&e.session),isReady:e.isInitialized&&!e.isLoading}}},4980:(e,s,r)=>{r.d(s,{RegistrationForm:()=>p});var t=r(2711),a=r(6291),n=r(8558),i=r(7538),o=r(3078),l=r(6941),d=r(8783),c=r(6705),m=r(1318),u=r(833),h=r(9639);function p(e){let{onSubmit:s,isLoading:r=!1,className:p}=e,[x,f]=(0,d.useState)(!1),[g,w]=(0,d.useState)(!1),j=(0,c.mN)({resolver:(0,a.u)(n.LE),mode:"onChange",defaultValues:{email:"",password:"",confirmPassword:""}}),b=async e=>{try{await s(e)}catch(e){console.error("Registration error:",e)}},v=()=>f(!x),y=()=>w(!g);return(0,t.jsxs)("div",{className:p,children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-center",children:"Create Account"}),(0,t.jsx)("p",{className:"text-muted-foreground text-center mt-2",children:"Join BassNotion to start your bass learning journey"})]}),(0,t.jsx)(u.lV,{...j,children:(0,t.jsxs)("form",{onSubmit:j.handleSubmit(b),className:"space-y-4",children:[(0,t.jsx)(u.zB,{control:j.control,name:"email",render:e=>{let{field:s}=e;return(0,t.jsxs)(u.eI,{children:[(0,t.jsx)(u.lR,{children:"Email"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(h.p,{type:"email",placeholder:"Enter your email",autoComplete:"email",disabled:r,...s})}),(0,t.jsx)(u.C5,{})]})}}),(0,t.jsx)(u.zB,{control:j.control,name:"password",render:e=>{let{field:s}=e;return(0,t.jsxs)(u.eI,{children:[(0,t.jsx)(u.lR,{children:"Password"}),(0,t.jsx)(u.MJ,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.p,{type:x?"text":"password",placeholder:"Create a strong password",autoComplete:"new-password",disabled:r,...s}),(0,t.jsxs)(m.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:v,disabled:r,children:[x?(0,t.jsx)(i.A,{className:"h-4 w-4"}):(0,t.jsx)(o.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:x?"Hide password":"Show password"})]})]})}),(0,t.jsx)(u.C5,{})]})}}),(0,t.jsx)(u.zB,{control:j.control,name:"confirmPassword",render:e=>{let{field:s}=e;return(0,t.jsxs)(u.eI,{children:[(0,t.jsx)(u.lR,{children:"Confirm Password"}),(0,t.jsx)(u.MJ,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.p,{type:g?"text":"password",placeholder:"Confirm your password",autoComplete:"new-password",disabled:r,...s}),(0,t.jsxs)(m.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:y,disabled:r,children:[g?(0,t.jsx)(i.A,{className:"h-4 w-4"}):(0,t.jsx)(o.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:g?"Hide password":"Show password"})]})]})}),(0,t.jsx)(u.C5,{})]})}}),(0,t.jsx)(m.$,{type:"submit",className:"w-full",disabled:r||!j.formState.isValid,children:r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):"Create Account"})]})}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",(0,t.jsx)(m.$,{variant:"link",className:"p-0 h-auto",children:"Sign in"})]})})]})}},6709:(e,s,r)=>{r.d(s,{cn:()=>n});var t=r(1511),a=r(1142);function n(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,a.QP)((0,t.$)(s))}},8558:(e,s,r)=>{r.d(s,{X5:()=>c,LE:()=>m});var t,a=r(5247);let n={email:{required:"Email is required",invalid:"Invalid email format"},password:{required:"Password is required",minLength:"Password must be at least 8 characters",strength:"Password must contain uppercase, lowercase, number and special character",mismatch:"Passwords don't match"},displayName:{required:"Display name is required",minLength:"Display name must be at least 2 characters"}},i=a.z.string().min(1,n.email.required).email(n.email.invalid),o=a.z.string().min(8,n.password.minLength).regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9!@#$%^&*])/,n.password.strength),l=a.z.string().min(2,n.displayName.minLength),d=a.z.string().optional(),c=a.z.object({email:i,password:a.z.string().min(1,n.password.required)}),m=a.z.object({email:i,password:o,confirmPassword:a.z.string()}).refine(e=>e.password===e.confirmPassword,{message:n.password.mismatch,path:["confirmPassword"]});a.z.object({email:i,password:o,confirmPassword:a.z.string(),displayName:a.z.string().min(2,n.displayName.minLength),bio:a.z.string().optional()}).refine(e=>e.password===e.confirmPassword,{message:n.password.mismatch,path:["confirmPassword"]}),a.z.object({displayName:l,bio:d,avatarUrl:a.z.string().url().optional()}),a.z.object({theme:a.z.enum(["light","dark"]).default("dark"),emailNotifications:a.z.boolean().default(!0),defaultMetronomeSettings:a.z.object({bpm:a.z.number().min(40).max(300).default(120),timeSignature:a.z.string().default("4/4"),sound:a.z.enum(["click","beep","wood"]).default("click")})}),a.z.object({id:a.z.string(),email:i,displayName:l,bio:d,avatarUrl:a.z.string().url().optional(),createdAt:a.z.string(),updatedAt:a.z.string()}),function(e){e.AVAILABLE="available",e.CONSUMED="consumed",e.EXPIRED="expired"}(t||(t={}))},9639:(e,s,r)=>{r.d(s,{p:()=>i});var t=r(2711),a=r(8783),n=r(6709);let i=a.forwardRef((e,s)=>{let{className:r,type:a,...i}=e;return(0,t.jsx)("input",{type:a,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...i})});i.displayName="Input"}}]);