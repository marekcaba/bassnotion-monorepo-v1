(()=>{var e={};e.id=520,e.ids=[520],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:e=>{"use strict";e.exports=require("http")},1645:e=>{"use strict";e.exports=require("net")},1997:e=>{"use strict";e.exports=require("punycode")},2192:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>d,pages:()=>u,routeModule:()=>m,tree:()=>c});var s=t(3403),a=t(8820),n=t(9670),o=t.n(n),i=t(1377),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let c={children:["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3598)),"/Users/marekcaba/Documents/Projekty 2024/BassNotion/4. Cursor Project Folder/bassnotion-monorepo-v1/apps/frontend/src/app/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8837)),"/Users/marekcaba/Documents/Projekty 2024/BassNotion/4. Cursor Project Folder/bassnotion-monorepo-v1/apps/frontend/src/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,4167)),"/Users/marekcaba/Documents/Projekty 2024/BassNotion/4. Cursor Project Folder/bassnotion-monorepo-v1/apps/frontend/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,3685)),"/Users/marekcaba/Documents/Projekty 2024/BassNotion/4. Cursor Project Folder/bassnotion-monorepo-v1/apps/frontend/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9651,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,2408,23)),"next/dist/client/components/unauthorized-error"]}]}.children,u=["/Users/marekcaba/Documents/Projekty 2024/BassNotion/4. Cursor Project Folder/bassnotion-monorepo-v1/apps/frontend/src/app/login/page.tsx"],d={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3423:(e,r,t)=>{Promise.resolve().then(t.bind(t,5846))},3523:(e,r,t)=>{"use strict";t.d(r,{u:()=>n});var s=t(2177),a=t(7166);let n=(e={})=>{let r=(0,s.useRouter)(),{defaultRedirect:t="/dashboard",requireEmailConfirmation:n=!0}=e,o=(0,a.useCallback)(e=>e?n&&!e.email_confirmed_at?void r.push("/verify-email"):void r.push(t):void r.push("/login"),[r,t,n]);return{redirectAfterAuth:o,redirectToLogin:(0,a.useCallback)(()=>{r.push("/login")},[r]),redirectToDashboard:(0,a.useCallback)(()=>{r.push(t)},[r,t])}}},3598:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(4663).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/marekcaba/Documents/Projekty 2024/BassNotion/4. Cursor Project Folder/bassnotion-monorepo-v1/apps/frontend/src/app/login/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/marekcaba/Documents/Projekty 2024/BassNotion/4. Cursor Project Folder/bassnotion-monorepo-v1/apps/frontend/src/app/login/page.tsx","default")},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},4631:e=>{"use strict";e.exports=require("tls")},4735:e=>{"use strict";e.exports=require("events")},4763:(e,r,t)=>{"use strict";t.d(r,{tU:()=>O,av:()=>J,j7:()=>H,Xi:()=>Q});var s=t(475),a=t(7166),n=t(5023),o=t(7270),i=t(4924),l=t(3210),c=t(6733),u=t(1529),d=t(5937),m=t(6205),p=a.createContext(void 0);function f(e){let r=a.useContext(p);return e||r||"ltr"}var g="rovingFocusGroup.onEntryFocus",v={bubbles:!1,cancelable:!0},h="RovingFocusGroup",[x,b,y]=(0,i.N)(h),[w,j]=(0,o.A)(h,[y]),[k,P]=w(h),N=a.forwardRef((e,r)=>(0,s.jsx)(x.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(x.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(C,{...e,ref:r})})}));N.displayName=h;var C=a.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:t,orientation:o,loop:i=!1,dir:c,currentTabStopId:p,defaultCurrentTabStopId:x,onCurrentTabStopIdChange:y,onEntryFocus:w,preventScrollOnEntryFocus:j=!1,...P}=e,N=a.useRef(null),C=(0,l.s)(r,N),E=f(c),[D,F]=(0,m.i)({prop:p,defaultProp:x??null,onChange:y,caller:h}),[_,A]=a.useState(!1),I=(0,d.c)(w),q=b(t),L=a.useRef(!1),[T,S]=a.useState(0);return a.useEffect(()=>{let e=N.current;if(e)return e.addEventListener(g,I),()=>e.removeEventListener(g,I)},[I]),(0,s.jsx)(k,{scope:t,orientation:o,dir:E,loop:i,currentTabStopId:D,onItemFocus:a.useCallback(e=>F(e),[F]),onItemShiftTab:a.useCallback(()=>A(!0),[]),onFocusableItemAdd:a.useCallback(()=>S(e=>e+1),[]),onFocusableItemRemove:a.useCallback(()=>S(e=>e-1),[]),children:(0,s.jsx)(u.sG.div,{tabIndex:_||0===T?-1:0,"data-orientation":o,...P,ref:C,style:{outline:"none",...e.style},onMouseDown:(0,n.m)(e.onMouseDown,()=>{L.current=!0}),onFocus:(0,n.m)(e.onFocus,e=>{let r=!L.current;if(e.target===e.currentTarget&&r&&!_){let r=new CustomEvent(g,v);if(e.currentTarget.dispatchEvent(r),!r.defaultPrevented){let e=q().filter(e=>e.focusable);R([e.find(e=>e.active),e.find(e=>e.id===D),...e].filter(Boolean).map(e=>e.ref.current),j)}}L.current=!1}),onBlur:(0,n.m)(e.onBlur,()=>A(!1))})})}),E="RovingFocusGroupItem",D=a.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:t,focusable:o=!0,active:i=!1,tabStopId:l,children:d,...m}=e,p=(0,c.B)(),f=l||p,g=P(E,t),v=g.currentTabStopId===f,h=b(t),{onFocusableItemAdd:y,onFocusableItemRemove:w,currentTabStopId:j}=g;return a.useEffect(()=>{if(o)return y(),()=>w()},[o,y,w]),(0,s.jsx)(x.ItemSlot,{scope:t,id:f,focusable:o,active:i,children:(0,s.jsx)(u.sG.span,{tabIndex:v?0:-1,"data-orientation":g.orientation,...m,ref:r,onMouseDown:(0,n.m)(e.onMouseDown,e=>{o?g.onItemFocus(f):e.preventDefault()}),onFocus:(0,n.m)(e.onFocus,()=>g.onItemFocus(f)),onKeyDown:(0,n.m)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void g.onItemShiftTab();if(e.target!==e.currentTarget)return;let r=function(e,r,t){var s;let a=(s=e.key,"rtl"!==t?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===r&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===r&&["ArrowUp","ArrowDown"].includes(a)))return F[a]}(e,g.orientation,g.dir);if(void 0!==r){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let t=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===r)t.reverse();else if("prev"===r||"next"===r){"prev"===r&&t.reverse();let s=t.indexOf(e.currentTarget);t=g.loop?function(e,r){return e.map((t,s)=>e[(r+s)%e.length])}(t,s+1):t.slice(s+1)}setTimeout(()=>R(t))}}),children:"function"==typeof d?d({isCurrentTabStop:v,hasTabStop:null!=j}):d})})});D.displayName=E;var F={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function R(e,r=!1){let t=document.activeElement;for(let s of e)if(s===t||(s.focus({preventScroll:r}),document.activeElement!==t))return}var _=t(7655),A="Tabs",[I,q]=(0,o.A)(A,[j]),L=j(),[T,S]=I(A),G=a.forwardRef((e,r)=>{let{__scopeTabs:t,value:a,onValueChange:n,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:d="automatic",...p}=e,g=f(l),[v,h]=(0,m.i)({prop:a,onChange:n,defaultProp:o??"",caller:A});return(0,s.jsx)(T,{scope:t,baseId:(0,c.B)(),value:v,onValueChange:h,orientation:i,dir:g,activationMode:d,children:(0,s.jsx)(u.sG.div,{dir:g,"data-orientation":i,...p,ref:r})})});G.displayName=A;var U="TabsList",B=a.forwardRef((e,r)=>{let{__scopeTabs:t,loop:a=!0,...n}=e,o=S(U,t),i=L(t);return(0,s.jsx)(N,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:a,children:(0,s.jsx)(u.sG.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:r})})});B.displayName=U;var M="TabsTrigger",K=a.forwardRef((e,r)=>{let{__scopeTabs:t,value:a,disabled:o=!1,...i}=e,l=S(M,t),c=L(t),d=V(l.baseId,a),m=W(l.baseId,a),p=a===l.value;return(0,s.jsx)(D,{asChild:!0,...c,focusable:!o,active:p,children:(0,s.jsx)(u.sG.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":m,"data-state":p?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:d,...i,ref:r,onMouseDown:(0,n.m)(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(a)}),onKeyDown:(0,n.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(a)}),onFocus:(0,n.m)(e.onFocus,()=>{let e="manual"!==l.activationMode;p||o||!e||l.onValueChange(a)})})})});K.displayName=M;var $="TabsContent",z=a.forwardRef((e,r)=>{let{__scopeTabs:t,value:n,forceMount:o,children:i,...l}=e,c=S($,t),d=V(c.baseId,n),m=W(c.baseId,n),p=n===c.value,f=a.useRef(p);return a.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.jsx)(_.C,{present:o||p,children:({present:t})=>(0,s.jsx)(u.sG.div,{"data-state":p?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!t,id:m,tabIndex:0,...l,ref:r,style:{...e.style,animationDuration:f.current?"0s":void 0},children:t&&i})})});function V(e,r){return`${e}-trigger-${r}`}function W(e,r){return`${e}-content-${r}`}z.displayName=$;var X=t(4177);let O=G,H=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(B,{ref:t,className:(0,X.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...r}));H.displayName=B.displayName;let Q=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(K,{ref:t,className:(0,X.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...r}));Q.displayName=K.displayName;let J=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(z,{ref:t,className:(0,X.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r}));J.displayName=z.displayName},5047:(e,r,t)=>{Promise.resolve().then(t.bind(t,3598))},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},5846:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>b});var s=t(475),a=t(7166),n=t(2177),o=t(1162),i=t.n(o),l=t(7383),c=t(8849),u=t(6237),d=t(7969),m=t(8124);function p(e){return(console.error("[Auth Debug] Original error:",{message:e.message,status:e.status,name:e.name}),e.message?.includes("over_email_send_rate_limit"))?"Too many emails sent. Please wait a few minutes before trying again.":e.message?.includes("email rate limit exceeded")?"Email rate limit exceeded. Please try again in a few minutes.":e.message?.includes("Invalid login credentials")||e.message?.includes("Invalid email or password")?"Invalid email or password. Please check your credentials and try again.":e.message?.includes("Email not confirmed")?"Please check your email and click the confirmation link before signing in.":e.message?.includes("User not found")?"No account found with this email address. Please sign up first.":e.message?.includes("Email already registered")||e.message?.includes("User already registered")?"An account with this email already exists. Please sign in instead.":e.message?.includes("Password should be at least")?"Password must be at least 6 characters long.":e.message?.includes("signup disabled")?"New account registration is currently disabled. Please contact support.":429===e.status?"Too many requests. Please wait a moment and try again.":422===e.status?"Invalid input. Please check your email and password format.":400===e.status?"Bad request. Please check your input and try again.":e.message||"An unexpected error occurred. Please try again."}function f(){let[e,r]=(0,a.useState)(""),[t,n]=(0,a.useState)(!1),[o,i]=(0,a.useState)(!1),{toast:l}=(0,c.dj)(),f=async(r=!1)=>{try{n(!0);let{error:t}=await m.y1.signInWithMagicLink(e,r);if(t)throw t;l({title:"Check your email",description:r?"We sent you a magic link to create your account and sign in.":"We sent you a magic link to sign in."}),i(!1)}catch(s){let e="Failed to send magic link",r=s?.message||"",t=s?.status;r.includes("email rate limit exceeded")||r.includes("over_email_send_rate_limit")||429===t?e="Email rate limit exceeded. Please try again in a few minutes.":r.includes("rate limit")||r.includes("too many")?e="Too many requests. Please wait a moment and try again.":s instanceof m.lR?e=p(s):s instanceof Error&&(e=s.message),l({title:"Error",description:e,variant:"destructive"})}finally{n(!1)}},g=async r=>{r.preventDefault();try{n(!0),i(!1);let{exists:r,error:t}=await m.y1.checkUserExists(e);if(t)throw t;if(!r)return void i(!0);await f(!1)}catch(r){let e="Failed to check email";r instanceof m.lR?e=p(r):r instanceof Error&&(e=r.message),l({title:"Error",description:e,variant:"destructive"})}finally{n(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,s.jsxs)("form",{onSubmit:g,className:"flex flex-col space-y-4",children:[(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(d.p,{type:"email",placeholder:"Enter your email",value:e,onChange:e=>r(e.target.value),disabled:t,required:!0})}),(0,s.jsx)(u.$,{type:"submit",disabled:t,children:t?"Processing...":"Continue with Magic Link"})]}),o&&(0,s.jsxs)("div",{className:"mt-2 p-4 border rounded-lg bg-muted",children:[(0,s.jsxs)("p",{className:"text-sm mb-2",children:["No account exists for ",e,"."]}),(0,s.jsx)(u.$,{onClick:()=>f(!0),disabled:t,variant:"secondary",className:"w-full",children:"Create New Account"})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"We'll send you a magic link to sign in instantly."})]})}var g=t(5590),v=t(3523),h=t(4763);function x(){(0,n.useRouter)();let[e,r]=(0,a.useState)(!1),[t,o]=(0,a.useState)(!1);(0,n.useSearchParams)().get("message");let{setUser:d,setSession:p}=(0,g.A)(),{redirectAfterAuth:x}=(0,v.u)(),{toast:b}=(0,c.dj)(),y=async e=>{try{if(r(!0),!e.email||!e.password)throw Error("Email and password are required");console.log("[Login Debug] Using backend auth:",!1),console.log("[Login Debug] Environment variable:","false");{console.log("[Login Debug] Using Supabase authentication");let r=await m.y1.signIn(e);if(r.user&&r.session)d(r.user),p(r.session),x(r.user);else throw Error("Authentication failed - no user data received")}}catch(r){console.error("[Login Debug] Full error object:",r),console.error("[Login Debug] Error message:",r instanceof Error?r.message:"Unknown"),console.error("[Login Debug] Error name:",r instanceof Error?r.name:"Unknown");let e="Failed to sign in. Please try again.";r instanceof Error&&(e=r.message),console.log("[Login Debug] Final error message shown to user:",e),b({title:"Sign in failed",description:e,variant:"destructive"})}finally{r(!1)}},w=async()=>{try{o(!0),await m.y1.signInWithGoogle()}catch(e){b({title:"Error",description:e instanceof Error?e.message:"Failed to sign in with Google",variant:"destructive"}),o(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md space-y-6 sm:space-y-8",children:[(0,s.jsx)("div",{className:"bg-card rounded-lg border p-4 sm:p-6 shadow-sm",children:(0,s.jsxs)(h.tU,{defaultValue:"password",className:"space-y-4 sm:space-y-6",children:[(0,s.jsxs)(h.j7,{className:"grid w-full grid-cols-2 h-10",children:[(0,s.jsx)(h.Xi,{value:"password",className:"text-sm",children:"Password"}),(0,s.jsx)(h.Xi,{value:"magic-link",className:"text-sm",children:"Magic Link"})]}),(0,s.jsx)(h.av,{value:"password",children:(0,s.jsx)(l.QB,{onSubmit:y,onGoogleSignIn:w,isLoading:e,isGoogleLoading:t})}),(0,s.jsx)(h.av,{value:"magic-link",children:(0,s.jsx)(f,{})})]})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Don't have an account?"," ",(0,s.jsx)(u.$,{variant:"link",asChild:!0,className:"p-0 h-auto text-xs sm:text-sm",children:(0,s.jsx)(i(),{href:"/register",children:"Create account"})})]})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(u.$,{variant:"ghost",asChild:!0,className:"text-xs sm:text-sm",children:(0,s.jsx)(i(),{href:"/",children:"← Back to Home"})})})]})})}function b(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:(0,s.jsx)(x,{})})}},7383:(e,r,t)=>{"use strict";t.d(r,{QB:()=>a.LoginForm,g2:()=>s.RegistrationForm});var s=t(1172),a=t(5648);t(8054)},7910:e=>{"use strict";e.exports=require("stream")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9428:e=>{"use strict";e.exports=require("buffer")},9551:e=>{"use strict";e.exports=require("url")}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[32,975],()=>t(2192));module.exports=s})();