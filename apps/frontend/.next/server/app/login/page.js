(()=>{var e={};e.id=520,e.ids=[520],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:e=>{"use strict";e.exports=require("http")},1645:e=>{"use strict";e.exports=require("net")},1997:e=>{"use strict";e.exports=require("punycode")},2192:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>a.a,__next_app__:()=>d,pages:()=>u,routeModule:()=>p,tree:()=>c});var s=t(3403),n=t(8820),o=t(9670),a=t.n(o),i=t(1377),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let c={children:["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3598)),"/Users/marekcaba/Documents/Projekty 2024/BassNotion/4. Cursor Project Folder/bassnotion-monorepo-v1/apps/frontend/src/app/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8837)),"/Users/marekcaba/Documents/Projekty 2024/BassNotion/4. Cursor Project Folder/bassnotion-monorepo-v1/apps/frontend/src/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,4167)),"/Users/marekcaba/Documents/Projekty 2024/BassNotion/4. Cursor Project Folder/bassnotion-monorepo-v1/apps/frontend/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,3685)),"/Users/marekcaba/Documents/Projekty 2024/BassNotion/4. Cursor Project Folder/bassnotion-monorepo-v1/apps/frontend/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9651,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,2408,23)),"next/dist/client/components/unauthorized-error"]}]}.children,u=["/Users/marekcaba/Documents/Projekty 2024/BassNotion/4. Cursor Project Folder/bassnotion-monorepo-v1/apps/frontend/src/app/login/page.tsx"],d={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3423:(e,r,t)=>{Promise.resolve().then(t.bind(t,5846))},3523:(e,r,t)=>{"use strict";t.d(r,{u:()=>o});var s=t(2177),n=t(7166);let o=(e={})=>{let r=(0,s.useRouter)(),{defaultRedirect:t="/dashboard",requireEmailConfirmation:o=!0}=e,a=(0,n.useCallback)((e,s)=>{if(!e)return void r.push("/login");if(o&&!e.email_confirmed_at)return void r.push("/verify-email");let n=s||t;r.push(n)},[r,t,o]);return{redirectAfterAuth:a,redirectToLogin:(0,n.useCallback)(e=>{let t=e?`/login?returnTo=${encodeURIComponent(e)}`:"/login";r.push(t)},[r]),redirectToDashboard:(0,n.useCallback)(()=>{r.push(t)},[r,t])}}},3598:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(4663).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/marekcaba/Documents/Projekty 2024/BassNotion/4. Cursor Project Folder/bassnotion-monorepo-v1/apps/frontend/src/app/login/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/marekcaba/Documents/Projekty 2024/BassNotion/4. Cursor Project Folder/bassnotion-monorepo-v1/apps/frontend/src/app/login/page.tsx","default")},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},4631:e=>{"use strict";e.exports=require("tls")},4735:e=>{"use strict";e.exports=require("events")},4763:(e,r,t)=>{"use strict";t.d(r,{tU:()=>H,av:()=>Y,j7:()=>O,Xi:()=>Q});var s=t(475),n=t(7166),o=t(5023),a=t(7270),i=t(4924),l=t(3210),c=t(6733),u=t(1529),d=t(5937),p=t(6205),f=n.createContext(void 0);function m(e){let r=n.useContext(f);return e||r||"ltr"}var v="rovingFocusGroup.onEntryFocus",g={bubbles:!1,cancelable:!0},h="RovingFocusGroup",[x,b,y]=(0,i.N)(h),[j,w]=(0,a.A)(h,[y]),[k,C]=j(h),N=n.forwardRef((e,r)=>(0,s.jsx)(x.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(x.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(P,{...e,ref:r})})}));N.displayName=h;var P=n.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:t,orientation:a,loop:i=!1,dir:c,currentTabStopId:f,defaultCurrentTabStopId:x,onCurrentTabStopIdChange:y,onEntryFocus:j,preventScrollOnEntryFocus:w=!1,...C}=e,N=n.useRef(null),P=(0,l.s)(r,N),F=m(c),[R,E]=(0,p.i)({prop:f,defaultProp:x??null,onChange:y,caller:h}),[D,A]=n.useState(!1),T=(0,d.c)(j),q=b(t),_=n.useRef(!1),[S,G]=n.useState(0);return n.useEffect(()=>{let e=N.current;if(e)return e.addEventListener(v,T),()=>e.removeEventListener(v,T)},[T]),(0,s.jsx)(k,{scope:t,orientation:a,dir:F,loop:i,currentTabStopId:R,onItemFocus:n.useCallback(e=>E(e),[E]),onItemShiftTab:n.useCallback(()=>A(!0),[]),onFocusableItemAdd:n.useCallback(()=>G(e=>e+1),[]),onFocusableItemRemove:n.useCallback(()=>G(e=>e-1),[]),children:(0,s.jsx)(u.sG.div,{tabIndex:D||0===S?-1:0,"data-orientation":a,...C,ref:P,style:{outline:"none",...e.style},onMouseDown:(0,o.m)(e.onMouseDown,()=>{_.current=!0}),onFocus:(0,o.m)(e.onFocus,e=>{let r=!_.current;if(e.target===e.currentTarget&&r&&!D){let r=new CustomEvent(v,g);if(e.currentTarget.dispatchEvent(r),!r.defaultPrevented){let e=q().filter(e=>e.focusable);I([e.find(e=>e.active),e.find(e=>e.id===R),...e].filter(Boolean).map(e=>e.ref.current),w)}}_.current=!1}),onBlur:(0,o.m)(e.onBlur,()=>A(!1))})})}),F="RovingFocusGroupItem",R=n.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:t,focusable:a=!0,active:i=!1,tabStopId:l,children:d,...p}=e,f=(0,c.B)(),m=l||f,v=C(F,t),g=v.currentTabStopId===m,h=b(t),{onFocusableItemAdd:y,onFocusableItemRemove:j,currentTabStopId:w}=v;return n.useEffect(()=>{if(a)return y(),()=>j()},[a,y,j]),(0,s.jsx)(x.ItemSlot,{scope:t,id:m,focusable:a,active:i,children:(0,s.jsx)(u.sG.span,{tabIndex:g?0:-1,"data-orientation":v.orientation,...p,ref:r,onMouseDown:(0,o.m)(e.onMouseDown,e=>{a?v.onItemFocus(m):e.preventDefault()}),onFocus:(0,o.m)(e.onFocus,()=>v.onItemFocus(m)),onKeyDown:(0,o.m)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void v.onItemShiftTab();if(e.target!==e.currentTarget)return;let r=function(e,r,t){var s;let n=(s=e.key,"rtl"!==t?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===r&&["ArrowLeft","ArrowRight"].includes(n))&&!("horizontal"===r&&["ArrowUp","ArrowDown"].includes(n)))return E[n]}(e,v.orientation,v.dir);if(void 0!==r){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let t=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===r)t.reverse();else if("prev"===r||"next"===r){"prev"===r&&t.reverse();let s=t.indexOf(e.currentTarget);t=v.loop?function(e,r){return e.map((t,s)=>e[(r+s)%e.length])}(t,s+1):t.slice(s+1)}setTimeout(()=>I(t))}}),children:"function"==typeof d?d({isCurrentTabStop:g,hasTabStop:null!=w}):d})})});R.displayName=F;var E={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function I(e,r=!1){let t=document.activeElement;for(let s of e)if(s===t||(s.focus({preventScroll:r}),document.activeElement!==t))return}var D=t(7655),A="Tabs",[T,q]=(0,a.A)(A,[w]),_=w(),[S,G]=T(A),L=n.forwardRef((e,r)=>{let{__scopeTabs:t,value:n,onValueChange:o,defaultValue:a,orientation:i="horizontal",dir:l,activationMode:d="automatic",...f}=e,v=m(l),[g,h]=(0,p.i)({prop:n,onChange:o,defaultProp:a??"",caller:A});return(0,s.jsx)(S,{scope:t,baseId:(0,c.B)(),value:g,onValueChange:h,orientation:i,dir:v,activationMode:d,children:(0,s.jsx)(u.sG.div,{dir:v,"data-orientation":i,...f,ref:r})})});L.displayName=A;var B="TabsList",U=n.forwardRef((e,r)=>{let{__scopeTabs:t,loop:n=!0,...o}=e,a=G(B,t),i=_(t);return(0,s.jsx)(N,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:n,children:(0,s.jsx)(u.sG.div,{role:"tablist","aria-orientation":a.orientation,...o,ref:r})})});U.displayName=B;var M="TabsTrigger",K=n.forwardRef((e,r)=>{let{__scopeTabs:t,value:n,disabled:a=!1,...i}=e,l=G(M,t),c=_(t),d=z(l.baseId,n),p=V(l.baseId,n),f=n===l.value;return(0,s.jsx)(R,{asChild:!0,...c,focusable:!a,active:f,children:(0,s.jsx)(u.sG.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":p,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...i,ref:r,onMouseDown:(0,o.m)(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(n)}),onKeyDown:(0,o.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(n)}),onFocus:(0,o.m)(e.onFocus,()=>{let e="manual"!==l.activationMode;f||a||!e||l.onValueChange(n)})})})});K.displayName=M;var $="TabsContent",W=n.forwardRef((e,r)=>{let{__scopeTabs:t,value:o,forceMount:a,children:i,...l}=e,c=G($,t),d=z(c.baseId,o),p=V(c.baseId,o),f=o===c.value,m=n.useRef(f);return n.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.jsx)(D.C,{present:a||f,children:({present:t})=>(0,s.jsx)(u.sG.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!t,id:p,tabIndex:0,...l,ref:r,style:{...e.style,animationDuration:m.current?"0s":void 0},children:t&&i})})});function z(e,r){return`${e}-trigger-${r}`}function V(e,r){return`${e}-content-${r}`}W.displayName=$;var X=t(4177);let H=L,O=n.forwardRef(({className:e,...r},t)=>(0,s.jsx)(U,{ref:t,className:(0,X.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...r}));O.displayName=U.displayName;let Q=n.forwardRef(({className:e,...r},t)=>(0,s.jsx)(K,{ref:t,className:(0,X.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...r}));Q.displayName=K.displayName;let Y=n.forwardRef(({className:e,...r},t)=>(0,s.jsx)(W,{ref:t,className:(0,X.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r}));Y.displayName=W.displayName},5047:(e,r,t)=>{Promise.resolve().then(t.bind(t,3598))},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},5846:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>b});var s=t(475),n=t(7166),o=t(2177),a=t(1162),i=t.n(a),l=t(7383),c=t(8849),u=t(6237),d=t(7969),p=t(8124);function f(){let[e,r]=(0,n.useState)(""),[t,o]=(0,n.useState)(!1),[a,i]=(0,n.useState)(!1),{toast:l}=(0,c.dj)(),f=async(r=!1)=>{try{o(!0);let{error:t}=await p.y1.signInWithMagicLink(e,r);if(t)throw t;l({title:"Check your email",description:r?"We sent you a magic link to create your account and sign in.":"We sent you a magic link to sign in."}),i(!1)}catch(e){l({title:"Error",description:e instanceof Error?e.message:"Failed to send magic link",variant:"destructive"})}finally{o(!1)}},m=async r=>{r.preventDefault();try{o(!0),i(!1);let{exists:r,error:t}=await p.y1.checkUserExists(e);if(t)throw t;if(!r)return void i(!0);await f(!1)}catch(e){l({title:"Error",description:e instanceof Error?e.message:"Failed to check email",variant:"destructive"})}finally{o(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,s.jsxs)("form",{onSubmit:m,className:"flex flex-col space-y-4",children:[(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(d.p,{type:"email",placeholder:"Enter your email",value:e,onChange:e=>r(e.target.value),disabled:t,required:!0})}),(0,s.jsx)(u.$,{type:"submit",disabled:t,children:t?"Processing...":"Continue with Magic Link"})]}),a&&(0,s.jsxs)("div",{className:"mt-2 p-4 border rounded-lg bg-muted",children:[(0,s.jsxs)("p",{className:"text-sm mb-2",children:["No account exists for ",e,"."]}),(0,s.jsx)(u.$,{onClick:()=>f(!0),disabled:t,variant:"secondary",className:"w-full",children:"Create New Account"})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"We'll send you a magic link to sign in instantly."})]})}var m=t(6168),v=t(5590),g=t(3523),h=t(4763);function x(){let e=(0,o.useRouter)(),[r,t]=(0,n.useState)(!1),[a,d]=(0,n.useState)(!1),x=(0,o.useSearchParams)(),b=x.get("returnTo");x.get("message");let{setUser:y,setSession:j}=(0,v.A)(),{redirectAfterAuth:w}=(0,g.u)(),{toast:k}=(0,c.dj)(),C=async r=>{try{t(!0);{let t=await p.y1.signInWithBackend(r);if(t.success)k({title:"Welcome back!",description:"You have been signed in successfully."}),e.push("/dashboard");else throw Error(t.error?.message||"Login failed")}}catch(r){console.error("Login error:",r);let e="Failed to sign in. Please check your credentials and try again.";r instanceof Error&&(e=r.message,r instanceof m.lR&&(r.message.includes("Invalid login credentials")?e="Invalid email or password. Please check your credentials and try again.":r.message.includes("Email not confirmed")&&(e="Please check your email and click the confirmation link before signing in."))),k({title:"Sign in failed",description:e,variant:"destructive"})}finally{t(!1)}},N=async()=>{try{d(!0),await p.y1.signInWithGoogle()}catch(e){k({title:"Error",description:e instanceof Error?e.message:"Failed to sign in with Google",variant:"destructive"}),d(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,s.jsx)("div",{className:"bg-card rounded-lg border p-6 shadow-sm",children:(0,s.jsxs)(h.tU,{defaultValue:"password",className:"space-y-6",children:[(0,s.jsxs)(h.j7,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(h.Xi,{value:"password",children:"Password"}),(0,s.jsx)(h.Xi,{value:"magic-link",children:"Magic Link"})]}),(0,s.jsx)(h.av,{value:"password",children:(0,s.jsx)(l.QB,{onSubmit:C,onGoogleSignIn:N,isLoading:r,isGoogleLoading:a})}),(0,s.jsx)(h.av,{value:"magic-link",children:(0,s.jsx)(f,{})})]})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Don't have an account?"," ",(0,s.jsx)(u.$,{variant:"link",asChild:!0,className:"p-0 h-auto",children:(0,s.jsx)(i(),{href:`/register${b?`?returnTo=${encodeURIComponent(b)}`:""}`,children:"Create account"})})]})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(u.$,{variant:"ghost",asChild:!0,children:(0,s.jsx)(i(),{href:"/",children:"â† Back to Home"})})})]})})}function b(){return(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:(0,s.jsx)(x,{})})}},7383:(e,r,t)=>{"use strict";t.d(r,{QB:()=>n.LoginForm,g2:()=>s.RegistrationForm});var s=t(1172),n=t(5648);t(8054)},7910:e=>{"use strict";e.exports=require("stream")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9428:e=>{"use strict";e.exports=require("buffer")},9551:e=>{"use strict";e.exports=require("url")}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[32,975],()=>t(2192));module.exports=s})();